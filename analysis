# importing
import numpy as np
import matplotlib.pyplot as plt
import scipy as ss
import h5py
import matplotlib.colors as colors

# pre allocation
cell_pos = []

# define path: rn only one recording, later then more general
data_path = "data\\fish_1_05112024\\"

# get vxpy stuff
camera = h5py.File(data_path + "Camera.hdf5")
display = h5py.File(data_path + "Display.hdf5")
io = h5py.File(data_path + "Io.hdf5")

# get suite2p stuff
F = np.load(data_path + "suite2p\\F.npy")
ops = np.load(data_path + "suite2p\\ops.npy", allow_pickle=True).item()
stat = np.load(data_path + "suite2p\\stat.npy", allow_pickle=True)

for i in range(len(stat)):
    cell_pos.append(tuple(stat[i]["med"]))

# Delta F/F

# pre allocation
dff = np.zeros(np.shape(F))

# iterate over ???
for i, trace in enumerate(F):
    F0 = np.median(trace)
    dff[i,:] = [(x-F0)/F0 for x in trace]
